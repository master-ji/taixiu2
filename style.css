body { margin: 0; background: radial-gradient(circle, #222, #000); color: white; font-family: sans-serif; height: 100vh; overflow: hidden; }
.flex-center { display: none; position: fixed; inset: 0; z-index: 3000; align-items: center; justify-content: center; background: rgba(0,0,0,0.8); }

/* Thanh tiền cố định trên cùng */
.top-bar { position: fixed; top: 0; width: 100%; height: 60px; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; box-sizing: border-box; background: #111; border-bottom: 2px solid #f1c40f; z-index: 2000; }
.wallet-info { color: #f1c40f; font-weight: bold; border: 1px solid #f1c40f; padding: 5px 15px; border-radius: 20px; }
.plus-btn { background: #f1c40f; border: none; border-radius: 50%; cursor: pointer; font-weight: bold; }

/* Khu vực chính - Đẩy xuống để không bị thanh tiền che */
.main-content { margin-top: 80px; display: flex; flex-direction: column; align-items: center; gap: 15px; }

/* Khung chứa toàn bộ bàn cược */
.betting-board {
    background: rgba(20, 20, 20, 0.9);
    border: 2px solid #d4af37; /* Viền vàng sòng bạc */
    border-radius: 30px;
    padding: 30px;
    box-shadow: 0 0 50px rgba(0, 0, 0, 1), inset 0 0 20px rgba(212, 175, 55, 0.2);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 25px;
}

/* Khu vực Tài - Đĩa - Xỉu */
.betting-zone {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 35px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 100px; /* Tạo hình kén cho vùng cược */
    border: 1px solid rgba(255, 255, 255, 0.05);
}

/* Nâng cấp khung Tài/Xỉu */
.gate {
    width: 150px;
    height: 110px;
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border: 2px solid rgba(255,255,255,0.2);
    transition: 0.3s all;
    box-shadow: 0 8px 15px rgba(0,0,0,0.5);
}

.tai { background: linear-gradient(135deg, #ff4b2b, #ff416c); }
.xiu { background: linear-gradient(135deg, #00b4db, #0083b0); }

.gate:hover { transform: scale(1.05); border-color: #fff; }
.gate.active { 
    border-color: #fff; 
    box-shadow: 0 0 25px #fff, inset 0 0 10px rgba(0,0,0,0.3);
    animation: pulse 1.5s infinite;
}

/* Khung chứa chip cược */
.chip-rack {
    display: flex;
    gap: 15px;
    background: rgba(0, 0, 0, 0.4);
    padding: 10px 25px;
    border-radius: 50px;
    border: 1px solid #444;
}

.chip {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    border: 3px dashed rgba(255,255,255,0.4); /* Viền răng cưa giống chip thật */
    background: #333;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 0 #111;
}

.chip:active { transform: translateY(3px); box-shadow: none; }

/* Hiệu ứng nháy khi chọn cửa */
@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.8; }
    100% { opacity: 1; }
}

.plate { width: 180px; height: 180px; background: #eee; border-radius: 50%; border: 8px solid #333; position: relative; display: flex; align-items: center; justify-content: center; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
.lid { position: absolute; inset: -4px; background: radial-gradient(circle at 30% 30%, #444, #000); border-radius: 50%; z-index: 10; cursor: grab; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.6s; }
#timer { font-size: 3rem; color: #2ecc71; font-weight: bold; }
.nan-text { font-size: 0.7rem; color: #555; font-weight: bold; }

/* Xúc xắc 3 hướng rộng */
.dice-triangle { display: flex; flex-direction: column; align-items: center; gap: 20px; }
.dice-row { display: flex; gap: 30px; }
.dice { width: 35px; height: 35px; background: white; border-radius: 5px; position: relative; box-shadow: 1px 2px 5px rgba(0,0,0,0.2); }

/* Thành phần khác */
.bet-summary { text-align: center; color: #f1c40f; }
#betValue { font-size: 1.5rem; font-weight: bold; }

.roadmap { height: 30px; width: 300px; background: #000; border-radius: 15px; display: flex; align-items: center; padding: 0 10px; gap: 5px; }
.dot { width: 18px; height: 18px; border-radius: 50%; }
.dot-tai { background: white; } .dot-xiu { background: #333; }

.controls { display: flex; flex-direction: column; align-items: center; gap: 10px; }
.chips { display: flex; gap: 10px; }
.chip { width: 50px; height: 50px; border-radius: 50%; background: #333; color: white; border: 2px solid #555; cursor: pointer; font-weight: bold; }
.chip:hover { border-color: #f1c40f; }

.actions { display: flex; gap: 10px; }
.btn { padding: 10px 20px; border-radius: 10px; border: none; color: white; font-weight: bold; cursor: pointer; }
.btn-confirm { background: #f1c40f; color: black; }
.btn-allin { background: #6c5ce7; }
.btn-cancel { background: #555; }

.popup { background: #222; padding: 20px; border-radius: 15px; border: 1px solid #f1c40f; text-align: center; }
.res-box { text-align: center; }
.win-color { color: #2ecc71; } .lose-color { color: #e74c3c; }
/* Hiệu ứng rung lắc đĩa */
/* Hiệu ứng rung nhẹ nhàng */
@keyframes shake-gentle {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(0.5deg) translate(1px, 1px); }
    50% { transform: rotate(-0.5deg) translate(-1px, 0px); }
    75% { transform: rotate(0.5deg) translate(1px, -1px); }
    100% { transform: rotate(0deg); }
}

.is-shaking {
    /* Lắc trong 1 giây rồi dừng */
    animation: shake-gentle 0.2s infinite;
}
/* Làm nổi bật chip đang chọn */
.chip {
    transition: transform 0.2s;
}
.chip:focus {
    outline: none;
}
/* Mặc định chip đầu tiên có viền sáng */
.chip[data-val="10000"] {
    border: 3px solid #fff;
}
/* Hiệu ứng đồng xu bay */
.coin-fly {
    position: fixed;
    width: 25px;
    height: 25px;
    background: radial-gradient(circle, #f1c40f, #b8860b);
    border: 2px solid #fff;
    border-radius: 50%;
    z-index: 5000;
    pointer-events: none; /* Không làm vướng click chuột */
    box-shadow: 0 0 10px rgba(241, 196, 15, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #555;
    font-size: 10px;
    font-weight: bold;
}

@keyframes fly-to-target {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(0.3) translate(var(--tx), var(--ty)); opacity: 0; }
}

/* Hiệu ứng rung nhẹ khung cược khi nhận tiền */
.gate.bounce {
    animation: gate-bounce 0.2s ease-in-out;
}

@keyframes gate-bounce {
    0% { transform: scale(1.05); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1.05); }
}
/* Khung chứa lịch sử cầu */
.history-board {
    width: 100%;
    max-width: 450px;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 10px;
    margin-top: 5px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: flex-start;
    min-height: 40px;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
}

/* Các viên xúc xắc lịch sử */
.dot {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    position: relative;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    transition: transform 0.3s ease;
}

.dot-tai {
    background: radial-gradient(circle at 30% 30%, #ffffff, #cccccc);
    border: 1px solid #999;
}

.dot-xiu {
    background: radial-gradient(circle at 30% 30%, #444444, #000000);
    border: 1px solid #222;
}

/* Hiệu ứng viên mới nhất sẽ nhấp nháy */
.dot:last-child {
    animation: new-dot-glow 1s infinite alternate;
}

@keyframes new-dot-glow {
    from { transform: scale(1); box-shadow: 0 0 2px #fff; }
    to { transform: scale(1.2); box-shadow: 0 0 10px #f1c40f; }
}